{
  "entityType" : "RULE_CHAIN",
  "entity" : {
    "additionalInfo" : {
      "description" : ""
    },
    "configuration" : null,
    "debugMode" : false,
    "externalId" : {
      "entityType" : "RULE_CHAIN",
      "id" : "e3af6260-4b46-11ee-adc5-170e82239536"
    },
    "firstRuleNodeId" : {
      "entityType" : "RULE_NODE",
      "id" : "f53bbbb0-b11b-11ee-8373-7de626819ae0"
    },
    "id" : {
      "entityType" : "RULE_CHAIN",
      "id" : "e3af6260-4b46-11ee-adc5-170e82239536"
    },
    "name" : "EnergyConsumption",
    "root" : false,
    "type" : "CORE"
  },
  "metaData" : {
    "connections" : [ {
      "fromIndex" : 0,
      "toIndex" : 1,
      "type" : "Success"
    }, {
      "fromIndex" : 0,
      "toIndex" : 2,
      "type" : "Success"
    }, {
      "fromIndex" : 0,
      "toIndex" : 7,
      "type" : "Success"
    }, {
      "fromIndex" : 0,
      "toIndex" : 8,
      "type" : "Success"
    }, {
      "fromIndex" : 0,
      "toIndex" : 9,
      "type" : "Success"
    }, {
      "fromIndex" : 1,
      "toIndex" : 3,
      "type" : "Success"
    }, {
      "fromIndex" : 2,
      "toIndex" : 69,
      "type" : "Success"
    }, {
      "fromIndex" : 4,
      "toIndex" : 21,
      "type" : "Success"
    }, {
      "fromIndex" : 5,
      "toIndex" : 25,
      "type" : "Success"
    }, {
      "fromIndex" : 7,
      "toIndex" : 6,
      "type" : "True"
    }, {
      "fromIndex" : 8,
      "toIndex" : 70,
      "type" : "Success"
    }, {
      "fromIndex" : 9,
      "toIndex" : 15,
      "type" : "Success"
    }, {
      "fromIndex" : 10,
      "toIndex" : 11,
      "type" : "Success"
    }, {
      "fromIndex" : 11,
      "toIndex" : 32,
      "type" : "Success"
    }, {
      "fromIndex" : 11,
      "toIndex" : 73,
      "type" : "Success"
    }, {
      "fromIndex" : 12,
      "toIndex" : 24,
      "type" : "Success"
    }, {
      "fromIndex" : 14,
      "toIndex" : 12,
      "type" : "Success"
    }, {
      "fromIndex" : 16,
      "toIndex" : 17,
      "type" : "Success"
    }, {
      "fromIndex" : 17,
      "toIndex" : 74,
      "type" : "Success"
    }, {
      "fromIndex" : 18,
      "toIndex" : 19,
      "type" : "Success"
    }, {
      "fromIndex" : 19,
      "toIndex" : 28,
      "type" : "Success"
    }, {
      "fromIndex" : 21,
      "toIndex" : 22,
      "type" : "Success"
    }, {
      "fromIndex" : 22,
      "toIndex" : 71,
      "type" : "Success"
    }, {
      "fromIndex" : 23,
      "toIndex" : 10,
      "type" : "Success"
    }, {
      "fromIndex" : 24,
      "toIndex" : 75,
      "type" : "Success"
    }, {
      "fromIndex" : 25,
      "toIndex" : 26,
      "type" : "Success"
    }, {
      "fromIndex" : 26,
      "toIndex" : 72,
      "type" : "Success"
    }, {
      "fromIndex" : 27,
      "toIndex" : 16,
      "type" : "Success"
    }, {
      "fromIndex" : 28,
      "toIndex" : 76,
      "type" : "Success"
    }, {
      "fromIndex" : 29,
      "toIndex" : 4,
      "type" : "Success"
    }, {
      "fromIndex" : 30,
      "toIndex" : 5,
      "type" : "Success"
    }, {
      "fromIndex" : 31,
      "toIndex" : 23,
      "type" : "Success"
    }, {
      "fromIndex" : 32,
      "toIndex" : 14,
      "type" : "Success"
    }, {
      "fromIndex" : 33,
      "toIndex" : 13,
      "type" : "Success"
    }, {
      "fromIndex" : 34,
      "toIndex" : 27,
      "type" : "Success"
    }, {
      "fromIndex" : 35,
      "toIndex" : 18,
      "type" : "Success"
    }, {
      "fromIndex" : 36,
      "toIndex" : 20,
      "type" : "Success"
    }, {
      "fromIndex" : 37,
      "toIndex" : 38,
      "type" : "Success"
    }, {
      "fromIndex" : 38,
      "toIndex" : 39,
      "type" : "Success"
    }, {
      "fromIndex" : 40,
      "toIndex" : 41,
      "type" : "Success"
    }, {
      "fromIndex" : 41,
      "toIndex" : 42,
      "type" : "Success"
    }, {
      "fromIndex" : 43,
      "toIndex" : 44,
      "type" : "Success"
    }, {
      "fromIndex" : 44,
      "toIndex" : 45,
      "type" : "Success"
    }, {
      "fromIndex" : 46,
      "toIndex" : 47,
      "type" : "Success"
    }, {
      "fromIndex" : 47,
      "toIndex" : 48,
      "type" : "Success"
    }, {
      "fromIndex" : 49,
      "toIndex" : 50,
      "type" : "Success"
    }, {
      "fromIndex" : 50,
      "toIndex" : 51,
      "type" : "Success"
    }, {
      "fromIndex" : 52,
      "toIndex" : 53,
      "type" : "Success"
    }, {
      "fromIndex" : 53,
      "toIndex" : 54,
      "type" : "Success"
    }, {
      "fromIndex" : 55,
      "toIndex" : 56,
      "type" : "Success"
    }, {
      "fromIndex" : 56,
      "toIndex" : 57,
      "type" : "Success"
    }, {
      "fromIndex" : 58,
      "toIndex" : 59,
      "type" : "Success"
    }, {
      "fromIndex" : 59,
      "toIndex" : 60,
      "type" : "Success"
    }, {
      "fromIndex" : 61,
      "toIndex" : 29,
      "type" : "Success"
    }, {
      "fromIndex" : 61,
      "toIndex" : 37,
      "type" : "Success"
    }, {
      "fromIndex" : 62,
      "toIndex" : 30,
      "type" : "Success"
    }, {
      "fromIndex" : 62,
      "toIndex" : 40,
      "type" : "Success"
    }, {
      "fromIndex" : 63,
      "toIndex" : 31,
      "type" : "Success"
    }, {
      "fromIndex" : 63,
      "toIndex" : 43,
      "type" : "Success"
    }, {
      "fromIndex" : 64,
      "toIndex" : 34,
      "type" : "Success"
    }, {
      "fromIndex" : 64,
      "toIndex" : 46,
      "type" : "Success"
    }, {
      "fromIndex" : 65,
      "toIndex" : 32,
      "type" : "Success"
    }, {
      "fromIndex" : 65,
      "toIndex" : 49,
      "type" : "Success"
    }, {
      "fromIndex" : 66,
      "toIndex" : 35,
      "type" : "Success"
    }, {
      "fromIndex" : 66,
      "toIndex" : 52,
      "type" : "Success"
    }, {
      "fromIndex" : 67,
      "toIndex" : 33,
      "type" : "Success"
    }, {
      "fromIndex" : 67,
      "toIndex" : 55,
      "type" : "Success"
    }, {
      "fromIndex" : 68,
      "toIndex" : 36,
      "type" : "Success"
    }, {
      "fromIndex" : 68,
      "toIndex" : 58,
      "type" : "Success"
    }, {
      "fromIndex" : 69,
      "toIndex" : 61,
      "type" : "Success"
    }, {
      "fromIndex" : 70,
      "toIndex" : 62,
      "type" : "Success"
    }, {
      "fromIndex" : 71,
      "toIndex" : 63,
      "type" : "Success"
    }, {
      "fromIndex" : 72,
      "toIndex" : 64,
      "type" : "Success"
    }, {
      "fromIndex" : 73,
      "toIndex" : 65,
      "type" : "Success"
    }, {
      "fromIndex" : 74,
      "toIndex" : 66,
      "type" : "Success"
    }, {
      "fromIndex" : 75,
      "toIndex" : 67,
      "type" : "Success"
    }, {
      "fromIndex" : 76,
      "toIndex" : 68,
      "type" : "Success"
    } ],
    "firstNodeIndex" : 0,
    "nodes" : [ {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 298,
        "layoutY" : 127
      },
      "configuration" : {
        "originatorSource" : "RELATED",
        "entityType" : null,
        "entityNamePattern" : null,
        "relationsQuery" : {
          "fetchLastLevelOnly" : false,
          "direction" : "TO",
          "maxLevel" : 1,
          "filters" : [ {
            "relationType" : "Contains",
            "entityTypes" : [ "ASSET" ]
          }, {
            "relationType" : null,
            "entityTypes" : [ ]
          } ]
        }
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53bbbb0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "To Building Asset",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbChangeOriginatorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 577,
        "layoutY" : 97
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "energyConsumption",
          "defaultValue" : 0,
          "aggFunction" : "AVG",
          "target" : "energyConsumptionAvg"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53c09d0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Energy Avgerage",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 21,
        "layoutY" : 38
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "energyConsumption",
          "defaultValue" : 0,
          "aggFunction" : "SUM",
          "target" : "powerMonthlyConsumption"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "monthStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "monthStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "yearStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "yearStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "ts",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "ts"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53c09d1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Aggregate Sum",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 826,
        "layoutY" : 125
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53c30e0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 966,
        "layoutY" : 34
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53c30e1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1105,
        "layoutY" : 187
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53c57f0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "powerConsumptionCurrentMonthpersite",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 897,
        "layoutY" : 341
      },
      "configuration" : {
        "alarmType" : "General Alarm",
        "scriptLang" : "TBEL",
        "alarmDetailsBuildJs" : "var details = {};\nif (metadata.prevAlarmDetails) {\n    details = JSON.parse(metadata.prevAlarmDetails);\n    //remove prevAlarmDetails from metadata\n    delete metadata.prevAlarmDetails;\n    //now metadata is the same as it comes IN this rule node\n}\n\n\nreturn details;",
        "alarmDetailsBuildTbel" : "var details = {};\nif (metadata.prevAlarmDetails != null) {\n    details = JSON.parse(metadata.prevAlarmDetails);\n    //remove prevAlarmDetails from metadata\n    metadata.remove('prevAlarmDetails');\n    //now metadata is the same as it comes IN this rule node\n}\n\n\nreturn details;",
        "severity" : "CRITICAL",
        "propagate" : false,
        "propagateToOwner" : false,
        "propagateToOwnerHierarchy" : false,
        "propagateToTenant" : false,
        "useMessageAlarmData" : false,
        "overwriteAlarmDetails" : false,
        "dynamicSeverity" : false,
        "relationTypes" : [ ]
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53c7f00-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Asset alaram",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.action.TbCreateAlarmNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 604,
        "layoutY" : 322
      },
      "configuration" : {
        "scriptLang" : "TBEL",
        "jsScript" : "return msg.temperature > 20;",
        "tbelScript" : "return msg.energyConsumption > 200;"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53c7f01-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Script asset alaram",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.filter.TbJsFilterNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 564,
        "layoutY" : 146
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "cost",
          "defaultValue" : 0,
          "aggFunction" : "SUM",
          "target" : "costLatestSum"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "yearStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "yearStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "monthStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "monthStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "ts",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "ts"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53ca610-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "aggreagate latest cost total",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 560,
        "layoutY" : 247
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "cost",
          "defaultValue" : 0,
          "aggFunction" : "AVG",
          "target" : "latestAvgcost"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53ccd20-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Aggregate lastest cost average",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1593,
        "layoutY" : 97
      },
      "configuration" : {
        "originatorSource" : "RELATED",
        "entityType" : null,
        "entityNamePattern" : null,
        "relationsQuery" : {
          "fetchLastLevelOnly" : false,
          "direction" : "TO",
          "maxLevel" : 1,
          "filters" : [ {
            "relationType" : "Contains",
            "entityTypes" : [ "CUSTOMER" ]
          } ]
        }
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53cf430-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Transformation customer",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbChangeOriginatorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1230,
        "layoutY" : 254
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "userLatestMonthlyPowerConsumption",
          "defaultValue" : 0,
          "aggFunction" : "SUM",
          "target" : "latestMonthlyPowerConsumption"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "yearStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "yearStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "monthStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "monthStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "ts",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "ts"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53cf431-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Aggregate customer consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1911,
        "layoutY" : 213
      },
      "configuration" : {
        "originatorSource" : "TENANT",
        "entityType" : null,
        "entityNamePattern" : null,
        "relationsQuery" : {
          "direction" : "FROM",
          "maxLevel" : 1,
          "filters" : [ {
            "relationType" : "Contains",
            "entityTypes" : [ ]
          } ],
          "fetchLastLevelOnly" : false
        }
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53d1b40-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Tenant consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbChangeOriginatorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 2174,
        "layoutY" : 206
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53d1b41-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "name time series name",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1659,
        "layoutY" : 184
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53d4250-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "user tenant time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 870,
        "layoutY" : 255
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53d6960-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save Avg aggregate cost",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1189,
        "layoutY" : 365
      },
      "configuration" : {
        "originatorSource" : "CUSTOMER",
        "entityType" : null,
        "entityNamePattern" : null,
        "relationsQuery" : {
          "fetchLastLevelOnly" : false,
          "direction" : "TO",
          "maxLevel" : 1,
          "filters" : [ {
            "relationType" : "Manages",
            "entityTypes" : [ "CUSTOMER" ]
          } ]
        }
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53d6961-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Transformation cost customer",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbChangeOriginatorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1187,
        "layoutY" : 483
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "userCostLatestSum",
          "defaultValue" : 0,
          "aggFunction" : "SUM",
          "target" : "customerCostLatestSum"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "monthStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "monthStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "yearStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "yearStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "ts",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "ts"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53d9070-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Aggregate customer cost consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1759,
        "layoutY" : 344
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53d9071-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save cost aggregate sum at user level",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1877,
        "layoutY" : 273
      },
      "configuration" : {
        "originatorSource" : "TENANT",
        "entityType" : null,
        "entityNamePattern" : null,
        "relationsQuery" : {
          "direction" : "FROM",
          "maxLevel" : 1,
          "filters" : [ {
            "relationType" : "Contains",
            "entityTypes" : [ ]
          } ],
          "fetchLastLevelOnly" : false
        }
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53db780-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Tenant cost consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbChangeOriginatorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 2152,
        "layoutY" : 279
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53dde90-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "save times series tenant level",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1067,
        "layoutY" : 112
      },
      "configuration" : {
        "originatorSource" : "RELATED",
        "entityType" : null,
        "entityNamePattern" : null,
        "relationsQuery" : {
          "fetchLastLevelOnly" : false,
          "direction" : "TO",
          "maxLevel" : 1,
          "filters" : [ {
            "relationType" : "Contains",
            "entityTypes" : [ "USER" ]
          } ]
        }
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53dde91-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Transformation customer",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbChangeOriginatorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1173,
        "layoutY" : 27
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "powerMonthlyConsumption",
          "defaultValue" : 0,
          "aggFunction" : "SUM",
          "target" : "userLatestMonthlyPowerConsumption"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "yearStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "yearStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "monthStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "monthStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "ts",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "ts"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53e05a0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Aggregate user consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1340,
        "layoutY" : 111
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53e05a1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1797,
        "layoutY" : 83
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "latestMonthlyPowerConsumption",
          "defaultValue" : 0,
          "aggFunction" : "SUM",
          "target" : "latestmonthlyPowerConspTenant"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "monthStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "monthStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "yearStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "yearStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "ts",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "ts"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53e2cb0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Aggregate Tenant consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1083,
        "layoutY" : 428
      },
      "configuration" : {
        "originatorSource" : "RELATED",
        "entityType" : null,
        "entityNamePattern" : null,
        "relationsQuery" : {
          "fetchLastLevelOnly" : false,
          "direction" : "TO",
          "maxLevel" : 1,
          "filters" : [ {
            "relationType" : "Contains",
            "entityTypes" : [ "USER" ]
          } ]
        }
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53e2cb1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Transformation customer",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbChangeOriginatorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 866,
        "layoutY" : 434
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "costLatestSum",
          "defaultValue" : 0,
          "aggFunction" : "SUM",
          "target" : "userCostLatestSum"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "monthStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "monthStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "yearStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "yearStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "ts",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "ts"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53e53c0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Aggregate user consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1652,
        "layoutY" : 467
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53e7ad0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1912,
        "layoutY" : 400
      },
      "configuration" : {
        "direction" : "FROM",
        "relationType" : "Contains",
        "deduplicationInSec" : 10,
        "aggMappings" : [ {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "customerCostLatestSum",
          "defaultValue" : 0,
          "aggFunction" : "SUM",
          "target" : "tenantLastCostSum"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "monthStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "monthStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "yearStartDate",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "yearStartDate"
        }, {
          "sourceScope" : "LATEST_TELEMETRY",
          "source" : "ts",
          "defaultValue" : 0,
          "aggFunction" : "MAX",
          "target" : "ts"
        } ],
        "outMsgType" : "POST_TELEMETRY_REQUEST",
        "queueName" : null
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53e7ad1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Aggregate Tenant consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.analytics.latest.telemetry.TbAggLatestTelemetryNodeV2"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 628,
        "layoutY" : 38
      },
      "configuration" : {
        "inputValueKey" : "powerMonthlyConsumption",
        "outputValueKey" : "deltaPowerMonthlyConsumption",
        "useCache" : true,
        "addPeriodBetweenMsgs" : false,
        "periodValueKey" : "periodInMs",
        "round" : null,
        "tellFailureIfDeltaIsNegative" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53ea1e0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Asset delta Consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.CalculateDeltaNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 845,
        "layoutY" : 181
      },
      "configuration" : {
        "inputValueKey" : "costLatestSum",
        "outputValueKey" : "deltaCostLatestSum",
        "useCache" : true,
        "addPeriodBetweenMsgs" : false,
        "periodValueKey" : "periodInMs",
        "round" : null,
        "tellFailureIfDeltaIsNegative" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53ea1e1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Asset delta cost Consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.CalculateDeltaNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1568,
        "layoutY" : 13
      },
      "configuration" : {
        "inputValueKey" : "userLatestMonthlyPowerConsumption",
        "outputValueKey" : "deltaUserLatestMonthlyPowerConsumption",
        "useCache" : true,
        "addPeriodBetweenMsgs" : false,
        "periodValueKey" : "periodInMs",
        "round" : null,
        "tellFailureIfDeltaIsNegative" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53ec8f0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Asset delta Consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.CalculateDeltaNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1495,
        "layoutY" : 263
      },
      "configuration" : {
        "inputValueKey" : "latestMonthlyPowerConsumption",
        "outputValueKey" : "deltaLatestMonthlyPowerConsumption",
        "useCache" : true,
        "addPeriodBetweenMsgs" : false,
        "periodValueKey" : "periodInMs",
        "round" : null,
        "tellFailureIfDeltaIsNegative" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53ef000-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Asset delta Consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.CalculateDeltaNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 2113,
        "layoutY" : 91
      },
      "configuration" : {
        "inputValueKey" : "LatestmonthlyPowerConspTenant",
        "outputValueKey" : "deltaLatestMonthlyPowerConsumptionTenant",
        "useCache" : true,
        "addPeriodBetweenMsgs" : false,
        "periodValueKey" : "periodInMs",
        "round" : null,
        "tellFailureIfDeltaIsNegative" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53ef001-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Asset delta Consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.CalculateDeltaNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1495,
        "layoutY" : 540
      },
      "configuration" : {
        "inputValueKey" : "userCostLatestSum",
        "outputValueKey" : "deltaUserCostLatestSum",
        "useCache" : true,
        "addPeriodBetweenMsgs" : false,
        "periodValueKey" : "periodInMs",
        "round" : null,
        "tellFailureIfDeltaIsNegative" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53f1710-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Asset delta cost Consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.CalculateDeltaNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1588,
        "layoutY" : 404
      },
      "configuration" : {
        "inputValueKey" : "customerCostLatestSum",
        "outputValueKey" : "deltaCustomerCostLatestSum",
        "useCache" : true,
        "addPeriodBetweenMsgs" : false,
        "periodValueKey" : "periodInMs",
        "round" : null,
        "tellFailureIfDeltaIsNegative" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53f1711-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Asset delta cost Consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.CalculateDeltaNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 2185,
        "layoutY" : 456
      },
      "configuration" : {
        "inputValueKey" : "tenantLastCostSum",
        "outputValueKey" : "deltaTenantCostLatestSum",
        "useCache" : true,
        "addPeriodBetweenMsgs" : false,
        "periodValueKey" : "periodInMs",
        "round" : null,
        "tellFailureIfDeltaIsNegative" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53f3e20-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Asset delta cost Consumption",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.CalculateDeltaNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 76,
        "layoutY" : 394
      },
      "configuration" : {
        "latestTsKeyNames" : [ "powerMonthlyConsumption" ],
        "aggregation" : "NONE",
        "fetchMode" : "FIRST",
        "orderBy" : "ASC",
        "limit" : 1000,
        "useMetadataIntervalPatterns" : true,
        "startIntervalPattern" : "$[monthStartDate]",
        "endIntervalPattern" : "$[ts]",
        "startInterval" : 30,
        "startIntervalTimeUnit" : "DAYS",
        "endInterval" : 1,
        "endIntervalTimeUnit" : "SECONDS"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53f6530-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "current month reading",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetTelemetryNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 370,
        "layoutY" : 435
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : " var newMsg = {};\r\n    if(!metadata.powerMonthlyConsumption) metadata.powerMonthlyConsumption = 0;\r\n   let monthlyAssetConsumption = parseFloat((msg.powerMonthlyConsumption - JSON.parse(metadata.powerMonthlyConsumption)).toFixed(2));\r\n   if(monthlyAssetConsumption <= 0) { monthlyAssetConsumption=0 }\r\n   newMsg.monthlyAssetConsumption = monthlyAssetConsumption;\r\n\r\n   return {msg: newMsg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53f6531-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "test script",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 692,
        "layoutY" : 442
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53f8c40-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 172,
        "layoutY" : 520
      },
      "configuration" : {
        "latestTsKeyNames" : [ "costLatestSum" ],
        "aggregation" : "NONE",
        "fetchMode" : "FIRST",
        "orderBy" : "ASC",
        "limit" : 1000,
        "useMetadataIntervalPatterns" : true,
        "startIntervalPattern" : "$[monthStartDate]",
        "endIntervalPattern" : "$[ts]",
        "startInterval" : 30,
        "startIntervalTimeUnit" : "DAYS",
        "endInterval" : 1,
        "endIntervalTimeUnit" : "SECONDS"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53f8c41-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "current month reading",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetTelemetryNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 196,
        "layoutY" : 596
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : " var newMsg = {};\r\n    if(!metadata.costLatestSum) metadata.costLatestSum = 0;\r\n   let monthlyAssetCost = parseFloat((msg.costLatestSum - JSON.parse(metadata.costLatestSum)).toFixed(2));\r\n   if(monthlyAssetCost <= 0) { monthlyAssetCost=0 }\r\n   newMsg.monthlyAssetCost = monthlyAssetCost;\r\n\r\n   return {msg: newMsg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53fb350-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "test script",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 510,
        "layoutY" : 497
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53fda60-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 843,
        "layoutY" : 578
      },
      "configuration" : {
        "latestTsKeyNames" : [ "userLatestMonthlyPowerConsumption" ],
        "aggregation" : "NONE",
        "fetchMode" : "FIRST",
        "orderBy" : "ASC",
        "limit" : 1000,
        "useMetadataIntervalPatterns" : true,
        "startIntervalPattern" : "$[monthStartDate]",
        "endIntervalPattern" : "$[ts]",
        "startInterval" : 30,
        "startIntervalTimeUnit" : "DAYS",
        "endInterval" : 1,
        "endIntervalTimeUnit" : "SECONDS"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f53fda61-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "current month reading",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetTelemetryNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1111,
        "layoutY" : 580
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : " var newMsg = {};\r\n    if(!metadata.userLatestMonthlyPowerConsumption) metadata.userLatestMonthlyPowerConsumption = 0;\r\n   let userMonthlyConsumption = parseFloat((msg.userLatestMonthlyPowerConsumption - JSON.parse(metadata.userLatestMonthlyPowerConsumption)).toFixed(2));\r\n   if(userMonthlyConsumption <= 0) { userMonthlyConsumption=0 }\r\n   newMsg.userMonthlyConsumption = userMonthlyConsumption;\r\n\r\n   return {msg: newMsg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5400170-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "test script",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1433,
        "layoutY" : 587
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5400171-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 847,
        "layoutY" : 653
      },
      "configuration" : {
        "latestTsKeyNames" : [ "userCostLatestSum" ],
        "aggregation" : "NONE",
        "fetchMode" : "FIRST",
        "orderBy" : "ASC",
        "limit" : 1000,
        "useMetadataIntervalPatterns" : true,
        "startIntervalPattern" : "$[monthStartDate]",
        "endIntervalPattern" : "$[ts]",
        "startInterval" : 30,
        "startIntervalTimeUnit" : "DAYS",
        "endInterval" : 1,
        "endIntervalTimeUnit" : "SECONDS"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5402880-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "current month reading",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetTelemetryNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1126,
        "layoutY" : 651
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : " var newMsg = {};\r\n    if(!metadata.userCostLatestSum) metadata.userCostLatestSum = 0;\r\n   let userMonthlyCost = parseFloat((msg.userCostLatestSum - JSON.parse(metadata.userCostLatestSum)).toFixed(2));\r\n   if(userMonthlyCost <= 0) { userMonthlyCost=0 }\r\n   newMsg.userMonthlyCost = userMonthlyCost;\r\n\r\n   return {msg: newMsg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5404f90-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "test script",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1448,
        "layoutY" : 658
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5404f91-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 870,
        "layoutY" : 736
      },
      "configuration" : {
        "latestTsKeyNames" : [ "latestMonthlyPowerConsumption" ],
        "aggregation" : "NONE",
        "fetchMode" : "FIRST",
        "orderBy" : "ASC",
        "limit" : 1000,
        "useMetadataIntervalPatterns" : true,
        "startIntervalPattern" : "$[monthStartDate]",
        "endIntervalPattern" : "$[ts]",
        "startInterval" : 30,
        "startIntervalTimeUnit" : "DAYS",
        "endInterval" : 1,
        "endIntervalTimeUnit" : "SECONDS"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f54076a0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "current month reading",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetTelemetryNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1132,
        "layoutY" : 746
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : " var newMsg = {};\r\n    if(!metadata.latestMonthlyPowerConsumption) metadata.latestMonthlyPowerConsumption = 0;\r\n   let customerMonthlyConsumption = parseFloat((msg.latestMonthlyPowerConsumption - JSON.parse(metadata.latestMonthlyPowerConsumption)).toFixed(2));\r\n   if(customerMonthlyConsumption <= 0) { customerMonthlyConsumption=0 }\r\n   newMsg.customerMonthlyConsumption = customerMonthlyConsumption;\r\n\r\n   return {msg: newMsg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f54076a1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "test script",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1454,
        "layoutY" : 753
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5409db0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 851,
        "layoutY" : 829
      },
      "configuration" : {
        "latestTsKeyNames" : [ "customerCostLatestSum" ],
        "aggregation" : "NONE",
        "fetchMode" : "FIRST",
        "orderBy" : "ASC",
        "limit" : 1000,
        "useMetadataIntervalPatterns" : true,
        "startIntervalPattern" : "$[monthStartDate]",
        "endIntervalPattern" : "$[ts]",
        "startInterval" : 30,
        "startIntervalTimeUnit" : "DAYS",
        "endInterval" : 1,
        "endIntervalTimeUnit" : "SECONDS"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f540c4c0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "current month reading",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetTelemetryNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1130,
        "layoutY" : 827
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : " var newMsg = {};\r\n    if(!metadata.customerCostLatestSum) metadata.customerCostLatestSum = 0;\r\n   let customerMonthlyCost = parseFloat((msg.customerCostLatestSum - JSON.parse(metadata.customerCostLatestSum)).toFixed(2));\r\n   if(customerMonthlyCost <= 0) { customerMonthlyCost=0 }\r\n   newMsg.customerMonthlyCost = customerMonthlyCost;\r\n\r\n   return {msg: newMsg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f540c4c1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "test script",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1452,
        "layoutY" : 834
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f540ebd0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1690,
        "layoutY" : 558
      },
      "configuration" : {
        "latestTsKeyNames" : [ "latestmonthlyPowerConspTenant" ],
        "aggregation" : "NONE",
        "fetchMode" : "FIRST",
        "orderBy" : "ASC",
        "limit" : 1000,
        "useMetadataIntervalPatterns" : true,
        "startIntervalPattern" : "$[monthStartDate]",
        "endIntervalPattern" : "$[ts]",
        "startInterval" : 30,
        "startIntervalTimeUnit" : "DAYS",
        "endInterval" : 1,
        "endIntervalTimeUnit" : "SECONDS"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f540ebd1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "current month reading",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetTelemetryNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 2011,
        "layoutY" : 540
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : " var newMsg = {};\r\n    if(!metadata.latestmonthlyPowerConspTenant) metadata.latestmonthlyPowerConspTenant = 0;\r\n   let tenantMonthlyConsumption\r\n = parseFloat((msg.latestmonthlyPowerConspTenant\r\n - JSON.parse(metadata.latestmonthlyPowerConspTenant)).toFixed(2));\r\n   if(tenantMonthlyConsumption <= 0) { tenantMonthlyConsumption=0 }\r\n   newMsg.tenantMonthlyConsumption = tenantMonthlyConsumption;\r\n\r\n   return {msg: newMsg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f54112e0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "test script",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 2319,
        "layoutY" : 560
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f54112e1-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1713,
        "layoutY" : 684
      },
      "configuration" : {
        "latestTsKeyNames" : [ "tenantLastCostSum" ],
        "aggregation" : "NONE",
        "fetchMode" : "FIRST",
        "orderBy" : "ASC",
        "limit" : 1000,
        "useMetadataIntervalPatterns" : true,
        "startIntervalPattern" : "$[monthStartDate]",
        "endIntervalPattern" : "$[ts]",
        "startInterval" : 30,
        "startIntervalTimeUnit" : "DAYS",
        "endInterval" : 1,
        "endIntervalTimeUnit" : "SECONDS"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f54139f0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "current month reading",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetTelemetryNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1982,
        "layoutY" : 694
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : " var newMsg = {};\r\n     if(!metadata.tenantLastCostSum) metadata.tenantLastCostSum = 0;\r\n   let tenantMonthlyCost = parseFloat((msg.tenantLastCostSum - JSON.parse(metadata.tenantLastCostSum)).toFixed(2));\r\n   if(tenantMonthlyCost <= 0) { tenantMonthlyCost=0 }\r\n   newMsg.tenantMonthlyCost = tenantMonthlyCost;\r\n\r\n   return {msg: newMsg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5416100-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "test script",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 2304,
        "layoutY" : 701
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5416101-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 405,
        "layoutY" : 34
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5418810-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 314,
        "layoutY" : 335
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5418811-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 663,
        "layoutY" : 579
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f541af20-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 629,
        "layoutY" : 649
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f541af21-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 624,
        "layoutY" : 736
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f541d630-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 618,
        "layoutY" : 826
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f541fd40-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1883,
        "layoutY" : 452
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f541fd41-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1733,
        "layoutY" : 818
      },
      "configuration" : {
        "defaultTTL" : 0,
        "skipLatestPersistence" : false,
        "useServerTs" : false
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : false,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5422450-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Save time series",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 207,
        "layoutY" : 0
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "msg.ts= new Date(msg.ts).getTime();\nmsg.monthStartDate= new Date(msg.monthStartDate).getTime();\nmsg.yearStartDate= new Date(msg.yearStartDate).getTime();\nreturn {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5422451-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Time formatting",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 64,
        "layoutY" : 246
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "msg.ts= new Date(msg.ts).getTime();\nmsg.monthStartDate= new Date(msg.monthStartDate).getTime();\nmsg.yearStartDate= new Date(msg.yearStartDate).getTime();\nreturn {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5424b60-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Time formatting",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 421,
        "layoutY" : 577
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "msg.ts= new Date(msg.ts).getTime();\nmsg.monthStartDate= new Date(msg.monthStartDate).getTime();\nmsg.yearStartDate= new Date(msg.yearStartDate).getTime();\nreturn {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5427270-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Time formatting",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 377,
        "layoutY" : 644
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "msg.ts= new Date(msg.ts).getTime();\nmsg.monthStartDate= new Date(msg.monthStartDate).getTime();\nmsg.yearStartDate= new Date(msg.yearStartDate).getTime();\nreturn {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5427271-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Time formatting",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 340,
        "layoutY" : 707
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "msg.ts= new Date(msg.ts).getTime();\nmsg.monthStartDate= new Date(msg.monthStartDate).getTime();\nmsg.yearStartDate= new Date(msg.yearStartDate).getTime();\nreturn {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5429980-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Time formatting",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 379,
        "layoutY" : 799
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "msg.ts= new Date(msg.ts).getTime();\nmsg.monthStartDate= new Date(msg.monthStartDate).getTime();\nmsg.yearStartDate= new Date(msg.yearStartDate).getTime();\nreturn {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f5429981-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Time formatting",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1687,
        "layoutY" : 628
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "msg.ts= new Date(msg.ts).getTime();\nmsg.monthStartDate= new Date(msg.monthStartDate).getTime();\nmsg.yearStartDate= new Date(msg.yearStartDate).getTime();\nreturn {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f542c090-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Time formatting",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 2084,
        "layoutY" : 770
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "msg.ts= new Date(msg.ts).getTime();\nmsg.monthStartDate= new Date(msg.monthStartDate).getTime();\nmsg.yearStartDate= new Date(msg.yearStartDate).getTime();\nreturn {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f542e7a0-b11b-11ee-8373-7de626819ae0"
      },
      "name" : "Time formatting",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    } ],
    "ruleChainConnections" : null
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}