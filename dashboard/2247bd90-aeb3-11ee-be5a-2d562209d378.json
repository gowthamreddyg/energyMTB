{
  "entityType" : "DASHBOARD",
  "entity" : {
    "assignedCustomers" : null,
    "configuration" : {
      "description" : "",
      "widgets" : {
        "738ba507-9b99-2208-8fe1-aa5619482e3d" : {
          "typeFullFqn" : "system.cards.markdown_card",
          "type" : "latest",
          "sizeX" : 5,
          "sizeY" : 3.5,
          "config" : {
            "datasources" : [ {
              "type" : "entityCount",
              "name" : "",
              "entityAliasId" : "ab6dc825-b78b-9de8-e36d-18b21e329b65",
              "dataKeys" : [ {
                "name" : "count",
                "type" : "count",
                "label" : "siteCount",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.006526860414969082,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "return value?value.toFixed():0;"
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            }, {
              "type" : "entityCount",
              "entityAliasId" : "ab6dc825-b78b-9de8-e36d-18b21e329b65",
              "filterId" : "01f3afb1-110b-b079-8f22-741d1ca6dfd2",
              "dataKeys" : [ {
                "name" : "count",
                "type" : "count",
                "label" : "siteActiveCount",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.6730829367951936,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "return value?value.toFixed():0;"
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            }, {
              "type" : "entityCount",
              "entityAliasId" : "2d6e9b28-e3c7-2d72-47b2-ab6fbdd32535",
              "dataKeys" : [ {
                "name" : "count",
                "type" : "count",
                "label" : "deviceCount",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.07879595012063212,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "return value?value.toFixed():0;"
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            }, {
              "type" : "entityCount",
              "entityAliasId" : "2d6e9b28-e3c7-2d72-47b2-ab6fbdd32535",
              "filterId" : "01f3afb1-110b-b079-8f22-741d1ca6dfd2",
              "dataKeys" : [ {
                "name" : "count",
                "type" : "count",
                "label" : "deviceActiveCount",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.18020894103742924,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "return value?value.toFixed():0;"
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            }, {
              "type" : "entity",
              "entityAliasId" : "607619ae-f469-6232-492b-ce789598f41d",
              "dataKeys" : [ {
                "name" : "deltaLatestMonthlyPowerConsumptionTenant",
                "type" : "timeseries",
                "label" : "monthlyTenantConsumption",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.7238838738180422,
                "aggregationType" : "NONE",
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "return value?value.toFixed()+ 'KW':0 + 'KW';"
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            }, {
              "type" : "entity",
              "entityAliasId" : "607619ae-f469-6232-492b-ce789598f41d",
              "dataKeys" : [ {
                "name" : "deltaTenantCostLatestSum",
                "type" : "timeseries",
                "label" : "monthlyTenantCost",
                "color" : "#9c27b0",
                "settings" : { },
                "_hash" : 0.2835289794839142,
                "aggregationType" : "NONE",
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "return value?value.toFixed()+ 'Rs':0 +'Rs';"
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1704693507808,
                  "endTimeMs" : 1704779907808
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "useMarkdownTextFunction" : false,
              "markdownTextPattern" : "<div class=\"CardHeader-root\">\n    <div class=\"CardHeader-content\">\n        <span class=\"Typography-root MuiTypography-h5 MuiCardHeader-title\">Statistics Card</span>\n    </div>\n</div>\n<div class=\"CardHeader-content Statistics\">\n    <div class=\"grid-root grid-container Statistics-content\">\n        <div class=\"grid-root grid-item sites\">\n            <div class=\"avathar\">\n                <svg fill=\"#FFFF\" height=\"calc(100% - 1rem)\" width=\"calc(100% - 1rem)\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 442 442\" xml:space=\"preserve\">\n                    <g>\n                    \t<path d=\"M382,0H60c-5.523,0-10,4.477-10,10v422c0,5.523,4.477,10,10,10h322c5.523,0,10-4.477,10-10V10C392,4.477,387.523,0,382,0z\n                    \t\t M295,422h-55V279h55V422z M372,422h-57V269c0-5.523-4.477-10-10-10h-75c-5.523,0-10,4.477-10,10v153H70V20h302V422z\"></path>\n                    \t<path d=\"M103,128h50c5.523,0,10-4.477,10-10V53c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC93,123.523,97.477,128,103,128z M113,63h30v45h-30V63z\"></path>\n                    \t<path d=\"M196,128h50c5.523,0,10-4.477,10-10V53c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC186,123.523,190.477,128,196,128z M206,63h30v45h-30V63z\"></path>\n                    \t<path d=\"M289,128h50c5.523,0,10-4.477,10-10V53c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC279,123.523,283.477,128,289,128z M299,63h30v45h-30V63z\"></path>\n                    \t<path d=\"M103,236h50c5.523,0,10-4.477,10-10v-65c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC93,231.523,97.477,236,103,236z M113,171h30v45h-30V171z\"></path>\n                    \t<path d=\"M196,236h50c5.523,0,10-4.477,10-10v-65c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC186,231.523,190.477,236,196,236z M206,171h30v45h-30V171z\"></path>\n                    \t<path d=\"M289,236h50c5.523,0,10-4.477,10-10v-65c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC279,231.523,283.477,236,289,236z M299,171h30v45h-30V171z\"></path>\n                    \t<path d=\"M103,344h50c5.523,0,10-4.477,10-10v-65c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC93,339.523,97.477,344,103,344z M113,279h30v45h-30V279z\"></path>\n                    </g>\n                </svg>\n            </div>\n            <div class=\"content\">\n                <span class=\"Typography-root caption\"> Sites</span>\n                <h6>${siteCount}</h6>\n            </div>\n        </div>\n                <div class=\"grid-root grid-item\">\n            <div class=\"avathar\">\n                <svg fill=\"#FFFF\" height=\"calc(100% - 1rem)\" width=\"calc(100% - 1rem)\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 442 442\" xml:space=\"preserve\">\n                    <g>\n                    \t<path d=\"M382,0H60c-5.523,0-10,4.477-10,10v422c0,5.523,4.477,10,10,10h322c5.523,0,10-4.477,10-10V10C392,4.477,387.523,0,382,0z\n                    \t\t M295,422h-55V279h55V422z M372,422h-57V269c0-5.523-4.477-10-10-10h-75c-5.523,0-10,4.477-10,10v153H70V20h302V422z\"></path>\n                    \t<path d=\"M103,128h50c5.523,0,10-4.477,10-10V53c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC93,123.523,97.477,128,103,128z M113,63h30v45h-30V63z\"></path>\n                    \t<path d=\"M196,128h50c5.523,0,10-4.477,10-10V53c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC186,123.523,190.477,128,196,128z M206,63h30v45h-30V63z\"></path>\n                    \t<path d=\"M289,128h50c5.523,0,10-4.477,10-10V53c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC279,123.523,283.477,128,289,128z M299,63h30v45h-30V63z\"></path>\n                    \t<path d=\"M103,236h50c5.523,0,10-4.477,10-10v-65c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC93,231.523,97.477,236,103,236z M113,171h30v45h-30V171z\"></path>\n                    \t<path d=\"M196,236h50c5.523,0,10-4.477,10-10v-65c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC186,231.523,190.477,236,196,236z M206,171h30v45h-30V171z\"></path>\n                    \t<path d=\"M289,236h50c5.523,0,10-4.477,10-10v-65c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC279,231.523,283.477,236,289,236z M299,171h30v45h-30V171z\"></path>\n                    \t<path d=\"M103,344h50c5.523,0,10-4.477,10-10v-65c0-5.523-4.477-10-10-10h-50c-5.523,0-10,4.477-10,10v65\n                    \t\tC93,339.523,97.477,344,103,344z M113,279h30v45h-30V279z\"></path>\n                    </g>\n                </svg>\n            </div>\n            <div class=\"content\">\n                <span class=\"Typography-root caption\"> Active Sites</span>\n                <h6>${siteActiveCount}</h6>\n            </div>\n        </div>\n                <div class=\"grid-root grid-item\">\n            <div class=\"avathar device\">\n                <svg fill=\"#FFFF\" height=\"calc(100% - 1rem)\" width=\"calc(100% - 1rem)\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 463 463\" xml:space=\"preserve\">\n                    <g>\n                    \t<path d=\"M383.5,88H375V31.5c0-4.142-3.358-7.5-7.5-7.5s-7.5,3.358-7.5,7.5V88h-8.5c-8.547,0-15.5,6.953-15.5,15.5v16\n                    \t\tc0,5.827,3.235,10.908,8,13.555V175.5c0,10.336,6.71,19.128,16,22.266V423.5c0,13.509-10.991,24.5-24.5,24.5h-112\n                    \t\tc-10.894,0-20.145-7.149-23.321-17h2.205c11.163,0,20.854-7.945,23.043-18.892L229.649,391H287.5c17.369,0,31.5-14.131,31.5-31.5\n                    \t\tv-304c0-17.369-14.131-31.5-31.5-31.5H263v-0.5C263,10.542,252.458,0,239.5,0h-16C210.542,0,200,10.542,200,23.5V24h-17v-0.5\n                    \t\tC183,10.542,172.458,0,159.5,0h-16C130.542,0,120,10.542,120,23.5V24H95.5C78.131,24,64,38.131,64,55.5v304\n                    \t\tc0,17.369,14.131,31.5,31.5,31.5h57.851l4.222,21.108c2.189,10.946,11.88,18.892,23.043,18.892h4.107\n                    \t\tc3.515,18.205,19.561,32,38.777,32h112c21.78,0,39.5-17.72,39.5-39.5V197.766c9.29-3.138,16-11.93,16-22.266v-42.445\n                    \t\tc4.765-2.647,8-7.728,8-13.555v-16C399,94.953,392.047,88,383.5,88z M215,23.5c0-4.687,3.813-8.5,8.5-8.5h16\n                    \t\tc4.687,0,8.5,3.813,8.5,8.5V24h-33V23.5z M135,23.5c0-4.687,3.813-8.5,8.5-8.5h16c4.687,0,8.5,3.813,8.5,8.5V24h-33V23.5z\n                    \t\t M79,359.5v-304C79,46.402,86.402,39,95.5,39h192c9.098,0,16.5,7.402,16.5,16.5v304c0,9.098-7.402,16.5-16.5,16.5h-192\n                    \t\tC86.402,376,79,368.598,79,359.5z M172.282,409.167L168.648,391h45.703l-3.634,18.167c-0.792,3.959-4.297,6.833-8.334,6.833\n                    \t\th-21.767C176.579,416,173.074,413.126,172.282,409.167z M351,103.5c0-0.276,0.224-0.5,0.5-0.5h32c0.276,0,0.5,0.224,0.5,0.5v16\n                    \t\tc0,0.276-0.224,0.5-0.5,0.5h-32c-0.276,0-0.5-0.224-0.5-0.5V103.5z M376,175.5c0,4.687-3.813,8.5-8.5,8.5s-8.5-3.813-8.5-8.5V135\n                    \t\th17V175.5z\"></path>\n                    \t<path d=\"M183,311.5c0-14.785-10.241-27.216-24-30.591V271.5c0-4.142-3.358-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v9.409\n                    \t\tc-13.759,3.374-24,15.806-24,30.591c0,17.369,14.131,31.5,31.5,31.5S183,328.869,183,311.5z M151.5,328\n                    \t\tc-9.098,0-16.5-7.402-16.5-16.5c0-6.396,3.666-11.942,9-14.678V311.5c0,4.142,3.358,7.5,7.5,7.5s7.5-3.358,7.5-7.5v-14.678\n                    \t\tc5.334,2.737,9,8.282,9,14.678C168,320.598,160.598,328,151.5,328z\"></path>\n                    \t<path d=\"M231.5,280c-17.369,0-31.5,14.131-31.5,31.5c0,14.785,10.241,27.216,24,30.591v9.409c0,4.142,3.358,7.5,7.5,7.5\n                    \t\ts7.5-3.358,7.5-7.5v-9.409c13.759-3.374,24-15.806,24-30.591C263,294.131,248.869,280,231.5,280z M239,326.178V311.5\n                    \t\tc0-4.142-3.358-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v14.678c-5.334-2.737-9-8.282-9-14.678c0-9.098,7.402-16.5,16.5-16.5\n                    \t\ts16.5,7.402,16.5,16.5C248,317.896,244.334,323.442,239,326.178z\"></path>\n                    \t<path d=\"M191.5,239c48.248,0,87.5-39.252,87.5-87.5S239.748,64,191.5,64S104,103.252,104,151.5S143.252,239,191.5,239z\n                    \t\t M145.842,207.764l6.161-6.161c2.929-2.929,2.929-7.678,0-10.606c-2.929-2.929-7.678-2.929-10.606,0l-6.161,6.161\n                    \t\tc-8.657-10.647-14.364-23.783-15.849-38.157h8.113c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5h-8.113\n                    \t\tc1.484-14.375,7.192-27.51,15.849-38.157l6.161,6.161c1.464,1.464,3.384,2.197,5.303,2.197s3.839-0.732,5.303-2.197\n                    \t\tc2.929-2.929,2.929-7.678,0-10.606l-6.161-6.161C156.49,86.579,169.626,80.872,184,79.387V87.5c0,4.142,3.358,7.5,7.5,7.5\n                    \t\ts7.5-3.358,7.5-7.5v-8.113c14.374,1.484,27.51,7.192,38.158,15.849l-6.161,6.161c-2.929,2.929-2.929,7.678,0,10.606\n                    \t\tc1.464,1.464,3.384,2.197,5.303,2.197s3.839-0.732,5.303-2.197l6.161-6.161c8.657,10.647,14.364,23.783,15.849,38.157H255.5\n                    \t\tc-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h8.113c-1.484,14.375-7.192,27.51-15.849,38.157l-6.161-6.161\n                    \t\tc-2.929-2.929-7.678-2.929-10.606,0c-2.929,2.929-2.929,7.678,0,10.606l6.161,6.161C224.683,217.906,208.792,224,191.5,224\n                    \t\tS158.317,217.906,145.842,207.764z\"></path>\n                    \t<path d=\"M214.147,94.881c-3.848-1.541-8.21,0.332-9.749,4.178l-11.591,28.979c-0.433-0.024-0.868-0.038-1.307-0.038\n                    \t\tc-12.958,0-23.5,10.542-23.5,23.5s10.542,23.5,23.5,23.5s23.5-10.542,23.5-23.5c0-7.152-3.215-13.563-8.272-17.877l11.597-28.993\n                    \t\tC219.864,100.784,217.993,96.419,214.147,94.881z M191.5,160c-4.687,0-8.5-3.813-8.5-8.5s3.813-8.5,8.5-8.5s8.5,3.813,8.5,8.5\n                    \t\tS196.187,160,191.5,160z\"></path>\n                    </g>\n</svg>\n            </div>\n            <div class=\"content\">\n                <span class=\"Typography-root caption\">Energy Meters</span>\n                <h6>${deviceCount}</h6>\n            </div>\n        </div>\n                <div class=\"grid-root grid-item\">\n            <div class=\"avathar device\">\n<svg fill=\"#FFFF\" height=\"calc(100% - 1rem)\" width=\"calc(100% - 1rem)\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 463 463\" xml:space=\"preserve\">\n                    <g>\n                    \t<path d=\"M383.5,88H375V31.5c0-4.142-3.358-7.5-7.5-7.5s-7.5,3.358-7.5,7.5V88h-8.5c-8.547,0-15.5,6.953-15.5,15.5v16\n                    \t\tc0,5.827,3.235,10.908,8,13.555V175.5c0,10.336,6.71,19.128,16,22.266V423.5c0,13.509-10.991,24.5-24.5,24.5h-112\n                    \t\tc-10.894,0-20.145-7.149-23.321-17h2.205c11.163,0,20.854-7.945,23.043-18.892L229.649,391H287.5c17.369,0,31.5-14.131,31.5-31.5\n                    \t\tv-304c0-17.369-14.131-31.5-31.5-31.5H263v-0.5C263,10.542,252.458,0,239.5,0h-16C210.542,0,200,10.542,200,23.5V24h-17v-0.5\n                    \t\tC183,10.542,172.458,0,159.5,0h-16C130.542,0,120,10.542,120,23.5V24H95.5C78.131,24,64,38.131,64,55.5v304\n                    \t\tc0,17.369,14.131,31.5,31.5,31.5h57.851l4.222,21.108c2.189,10.946,11.88,18.892,23.043,18.892h4.107\n                    \t\tc3.515,18.205,19.561,32,38.777,32h112c21.78,0,39.5-17.72,39.5-39.5V197.766c9.29-3.138,16-11.93,16-22.266v-42.445\n                    \t\tc4.765-2.647,8-7.728,8-13.555v-16C399,94.953,392.047,88,383.5,88z M215,23.5c0-4.687,3.813-8.5,8.5-8.5h16\n                    \t\tc4.687,0,8.5,3.813,8.5,8.5V24h-33V23.5z M135,23.5c0-4.687,3.813-8.5,8.5-8.5h16c4.687,0,8.5,3.813,8.5,8.5V24h-33V23.5z\n                    \t\t M79,359.5v-304C79,46.402,86.402,39,95.5,39h192c9.098,0,16.5,7.402,16.5,16.5v304c0,9.098-7.402,16.5-16.5,16.5h-192\n                    \t\tC86.402,376,79,368.598,79,359.5z M172.282,409.167L168.648,391h45.703l-3.634,18.167c-0.792,3.959-4.297,6.833-8.334,6.833\n                    \t\th-21.767C176.579,416,173.074,413.126,172.282,409.167z M351,103.5c0-0.276,0.224-0.5,0.5-0.5h32c0.276,0,0.5,0.224,0.5,0.5v16\n                    \t\tc0,0.276-0.224,0.5-0.5,0.5h-32c-0.276,0-0.5-0.224-0.5-0.5V103.5z M376,175.5c0,4.687-3.813,8.5-8.5,8.5s-8.5-3.813-8.5-8.5V135\n                    \t\th17V175.5z\"></path>\n                    \t<path d=\"M183,311.5c0-14.785-10.241-27.216-24-30.591V271.5c0-4.142-3.358-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v9.409\n                    \t\tc-13.759,3.374-24,15.806-24,30.591c0,17.369,14.131,31.5,31.5,31.5S183,328.869,183,311.5z M151.5,328\n                    \t\tc-9.098,0-16.5-7.402-16.5-16.5c0-6.396,3.666-11.942,9-14.678V311.5c0,4.142,3.358,7.5,7.5,7.5s7.5-3.358,7.5-7.5v-14.678\n                    \t\tc5.334,2.737,9,8.282,9,14.678C168,320.598,160.598,328,151.5,328z\"></path>\n                    \t<path d=\"M231.5,280c-17.369,0-31.5,14.131-31.5,31.5c0,14.785,10.241,27.216,24,30.591v9.409c0,4.142,3.358,7.5,7.5,7.5\n                    \t\ts7.5-3.358,7.5-7.5v-9.409c13.759-3.374,24-15.806,24-30.591C263,294.131,248.869,280,231.5,280z M239,326.178V311.5\n                    \t\tc0-4.142-3.358-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v14.678c-5.334-2.737-9-8.282-9-14.678c0-9.098,7.402-16.5,16.5-16.5\n                    \t\ts16.5,7.402,16.5,16.5C248,317.896,244.334,323.442,239,326.178z\"></path>\n                    \t<path d=\"M191.5,239c48.248,0,87.5-39.252,87.5-87.5S239.748,64,191.5,64S104,103.252,104,151.5S143.252,239,191.5,239z\n                    \t\t M145.842,207.764l6.161-6.161c2.929-2.929,2.929-7.678,0-10.606c-2.929-2.929-7.678-2.929-10.606,0l-6.161,6.161\n                    \t\tc-8.657-10.647-14.364-23.783-15.849-38.157h8.113c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5h-8.113\n                    \t\tc1.484-14.375,7.192-27.51,15.849-38.157l6.161,6.161c1.464,1.464,3.384,2.197,5.303,2.197s3.839-0.732,5.303-2.197\n                    \t\tc2.929-2.929,2.929-7.678,0-10.606l-6.161-6.161C156.49,86.579,169.626,80.872,184,79.387V87.5c0,4.142,3.358,7.5,7.5,7.5\n                    \t\ts7.5-3.358,7.5-7.5v-8.113c14.374,1.484,27.51,7.192,38.158,15.849l-6.161,6.161c-2.929,2.929-2.929,7.678,0,10.606\n                    \t\tc1.464,1.464,3.384,2.197,5.303,2.197s3.839-0.732,5.303-2.197l6.161-6.161c8.657,10.647,14.364,23.783,15.849,38.157H255.5\n                    \t\tc-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h8.113c-1.484,14.375-7.192,27.51-15.849,38.157l-6.161-6.161\n                    \t\tc-2.929-2.929-7.678-2.929-10.606,0c-2.929,2.929-2.929,7.678,0,10.606l6.161,6.161C224.683,217.906,208.792,224,191.5,224\n                    \t\tS158.317,217.906,145.842,207.764z\"></path>\n                    \t<path d=\"M214.147,94.881c-3.848-1.541-8.21,0.332-9.749,4.178l-11.591,28.979c-0.433-0.024-0.868-0.038-1.307-0.038\n                    \t\tc-12.958,0-23.5,10.542-23.5,23.5s10.542,23.5,23.5,23.5s23.5-10.542,23.5-23.5c0-7.152-3.215-13.563-8.272-17.877l11.597-28.993\n                    \t\tC219.864,100.784,217.993,96.419,214.147,94.881z M191.5,160c-4.687,0-8.5-3.813-8.5-8.5s3.813-8.5,8.5-8.5s8.5,3.813,8.5,8.5\n                    \t\tS196.187,160,191.5,160z\"></path>\n                    </g>\n</svg>\n            </div>\n            <div class=\"content\">\n                <span class=\"Typography-root caption\">Active Energy Meters</span>\n                <h6>${deviceActiveCount}</h6>\n            </div>\n        </div>\n                <div class=\"grid-root grid-item\">\n            <div class=\"avathar Consumption\">\n                <svg fill=\"#FFFF\" height=\"calc(100% - 1rem)\" width=\"calc(100% - 1rem)\" viewBox=\"0 0 32 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M15.999 0c-6.188 0-11.035 5.035-11.035 11.223 0 4.662 2.29 6.883 4.1 8.504 1.165 1.044 1.949 1.674 1.949 2.448v1.695c0 0.044 0.006 0.086 0.011 0.129h-0.023v2.895c0.001 3.053 1.975 5.105 5.033 5.105 2.952 0 4.967-2.052 4.967-5.105v-2.895h-0.029c0.006-0.043 0.013-0.085 0.013-0.129v-1.695c0-1.18 0.876-1.893 2.204-3.053 1.797-1.569 3.844-3.521 3.844-7.899 0-6.189-4.847-11.223-11.036-11.223zM15.962 30c-1.872 0-2.959-1.161-2.959-3.105l-0.014-1.334c0.72 0.246 1.7 0.439 3.012 0.439 1.294 0 2.276-0.207 3.003-0.462v1.356c0 1.974-1.102 3.105-3.041 3.105zM21.876 17.616c-1.358 1.186-2.889 2.413-2.889 4.559v1.264c-0.474 0.265-1.349 0.58-3.004 0.58-1.736 0-2.56-0.308-2.969-0.546v-1.298c0-1.706-1.334-2.791-2.615-3.938-1.697-1.521-3.434-3.245-3.434-7.014-0-5.085 3.95-9.223 9.034-9.223 5.086 0 9.036 4.138 9.036 9.223 0 3.47-1.515 4.956-3.16 6.393z\"></path>\n                </svg>\n            </div>\n            <div class=\"content\">\n                <span class=\"Typography-root caption\">Monthly Consumption</span>\n                <h6>${monthlyTenantConsumption}</h6>\n            </div>\n        </div>\n        <div class=\"grid-root grid-item\">\n            <div class=\"avathar cost\">\n                <svg fill=\"#FFFF\" height=\"calc(100% - 1rem)\" width=\"calc(100% - 1rem)\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"CurrencyUsdIcon\"><path d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\"></path></svg>\n            </div>\n            <div class=\"content\">\n                <span class=\"Typography-root caption\">Monthly Cost</span>\n                <h6>${monthlyTenantCost}</h6>\n            </div>\n        </div>\n                <div class=\"grid-root grid-item\">\n            <div class=\"avathar cost\">\n                <svg fill=\"#FFFF\" height=\"calc(100% - 1rem)\" width=\"calc(100% - 1rem)\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"CurrencyUsdIcon\"><path d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\"></path></svg>\n            </div>\n            <div class=\"content\">\n                <span class=\"Typography-root caption\">Monthly Cost</span>\n                <h6>${monthlyTenantCost}</h6>\n            </div>\n        </div>\n    </div>\n</div>",
              "markdownTextFunction" : "return '# Some title\\n - Entity name: ' + data[0]['entityName'];",
              "applyDefaultMarkdownStyle" : true,
              "markdownCss" : ".CardHeader-root{\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-align-items: center;\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n    padding: 16px;\n    padding: 0.4rem;\n}\n\n.CardHeader-Content{\n    -webkit-flex: 1 1 auto;\n    -ms-flex: 1 1 auto;\n    flex: 1 1 auto;\n}\n\n.CardHeader-title{\n    line-height: 1;\n    font-weight: 500;\n    font-size: 1rem;\n    letter-spacing: 0.0125em;\n    font-family: Inter,sans-serif,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";\n    color: rgba(58, 53, 65, 0.87);\n    display: block;\n    line-height: 2rem!important;\n    letter-spacing: 0.15px!important;\n}\n\n.Statistics{\n    padding: 0.5rem 1rem!important;\n}\n\n.Statistics-content{\n    flex-wrap: nowrap;\n    width: calc(100% + 0rem);\n    margin-left: -0rem;\n    box-sizing: border-box;\n    -ms-flex-direction: row;\n    flex-direction: row;\n    display: flex;\n}\n\n\n.grid-item{\n    flex:1.5;\n    display: flex;\n    flex-flow:row;\n}\n\n.sites{\n    flex:1;\n}\n\n.avathar{\n    position: relative;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-align-items: center;\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n    -webkit-box-pack: center;\n    -ms-flex-pack: center;\n    -webkit-justify-content: center;\n    justify-content: center;\n    -webkit-flex-shrink: 0;\n    -ms-flex-negative: 0;\n    flex-shrink: 0;\n    width: 40px;\n    height: 40px;\n    font-family: Inter,sans-serif,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";\n    font-size: 1.25rem;\n    line-height: 1;\n    border-radius: 6px;\n    overflow: hidden;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    color: #F4F5FA;\n    background-color: #BDBDBD;\n    border-radius: 5px;\n    color: rgba(58, 53, 65, 0.68);\n    background-color: #EEEEEE;\n    margin-right: 0.75rem;\n    width: 44px;\n    height: 44px;\n    box-shadow: 0px 4px 8px -4px rgba(58, 53, 65, 0.42);\n    color: #FFF;\n    background-color: #7870BE;\n}\n\n.content{\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-flex-direction: column;\n    -ms-flex-direction: column;\n    flex-direction: column;\n}\n\n.caption{\n        margin: 0;\n    font-family: Inter,sans-serif,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";\n    font-weight: 400;\n    font-size: 0.70rem;\n    line-height: 1.66;\n    letter-spacing: 0.4px;\n    color: rgba(58, 53, 65, 0.68);\n}\n\nh6{\n    font-size: 1rem;\n    margin: 0;\n    font-family: Inter,sans-serif,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";\n    font-weight: 500;\n    font-size: 1.125rem;\n    line-height: 1.6;\n    letter-spacing: 0.15px;\n    color: rgba(58, 53, 65, 0.87);\n}\n\n.device{\n    background-color: #7CD9FE;\n}\n\n.consumption{\n    background-color: #A760BD;\n}\n\n.cost{\n    background-color: #F871AA;\n}"
            },
            "title" : "Markdown/HTML Card",
            "showTitleIcon" : false,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "widgetStyle" : {
              "borderRadius" : "6px",
              "overflow" : "hidden",
              "boxShadow" : "0px 2px 10px 0px rgba(58, 53, 65, 0.1)"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "showLegend" : false,
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "enableDataExport" : false,
            "borderRadius" : "6",
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "738ba507-9b99-2208-8fe1-aa5619482e3d"
        },
        "65fc0809-e9ec-9bf0-29ce-35a3542375ab" : {
          "typeFullFqn" : "tenant.test_asset_table",
          "type" : "latest",
          "sizeX" : 7.5,
          "sizeY" : 5.5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : "",
              "entityAliasId" : "ab6dc825-b78b-9de8-e36d-18b21e329b65",
              "dataKeys" : [ {
                "name" : "name",
                "type" : "entityField",
                "label" : "Name",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.8398959689541501
              }, {
                "name" : "deltaPowerMonthConsumption",
                "type" : "timeseries",
                "label" : "consumption",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.7229362680171576,
                "aggregationType" : "NONE",
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "deltaCostMonthlySum",
                "type" : "timeseries",
                "label" : "cost",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.27671720496427477,
                "aggregationType" : "NONE",
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1704705545874,
                  "endTimeMs" : 1704791945874
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : { },
            "title" : "Consumption by Sites",
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showTitleIcon" : false,
            "titleTooltip" : "",
            "dropShadow" : true,
            "enableFullscreen" : false,
            "enableDataExport" : false,
            "widgetStyle" : { },
            "widgetCss" : "",
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "65fc0809-e9ec-9bf0-29ce-35a3542375ab"
        },
        "be9605f5-973f-e971-1e08-c75dbbdabd4d" : {
          "typeFullFqn" : "system.entity_admin_widgets.asset_admin_table",
          "type" : "latest",
          "sizeX" : 7.5,
          "sizeY" : 6.5,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 86400000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1704705989346,
                  "endTimeMs" : 1704792389346
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "entitiesTitle" : "Asset admin table",
              "enableSearch" : true,
              "enableSelectColumnDisplay" : true,
              "enableStickyHeader" : true,
              "enableStickyAction" : true,
              "showCellActionsMenu" : true,
              "reserveSpaceForHiddenAction" : "true",
              "displayEntityName" : false,
              "displayEntityLabel" : false,
              "displayEntityType" : false,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "entityName",
              "useRowStyleFunction" : false
            },
            "title" : "Asset admin table",
            "dropShadow" : true,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 10px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "name" : "",
              "entityAliasId" : "ab6dc825-b78b-9de8-e36d-18b21e329b65",
              "dataKeys" : [ {
                "name" : "name",
                "type" : "entityField",
                "label" : "Name",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.19636164085958252
              }, {
                "name" : "deltaPowerMonthConsumption",
                "type" : "timeseries",
                "label" : "consumption",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.6380543674610326,
                "decimals" : 0,
                "aggregationType" : "NONE",
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "deltaCostMonthlySum",
                "type" : "timeseries",
                "label" : "cost",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.25333281141872166,
                "decimals" : 0
              }, {
                "name" : "powerMonthlyConsumption",
                "type" : "timeseries",
                "label" : "total",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.08229459486327828,
                "decimals" : 0
              }, {
                "name" : "costLatestSum",
                "type" : "timeseries",
                "label" : "total cost",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.48435512511758927,
                "decimals" : 0
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            } ],
            "showTitleIcon" : false,
            "titleIcon" : "more_horiz",
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "widgetStyle" : { },
            "displayTimewindow" : true,
            "actions" : {
              "headerButton" : [ {
                "name" : "Add asset",
                "icon" : "add",
                "type" : "customPretty",
                "customHtml" : "<form #addAssetForm=\"ngForm\" [formGroup]=\"addAssetFormGroup\"\n      (ngSubmit)=\"save()\" style=\"width: 480px;\">\n  <mat-toolbar fxLayout=\"row\" color=\"primary\">\n    <h2>Add asset</h2>\n    <span fxFlex></span>\n    <button mat-icon-button\n            (click)=\"cancel()\"\n            type=\"button\">\n      <mat-icon class=\"material-icons\">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n  </mat-progress-bar>\n  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n  <div mat-dialog-content>\n      <div class=\"mat-padding\" fxLayout=\"column\">\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Asset name</mat-label>\n                <input matInput formControlName=\"assetName\" required>\n                <mat-error *ngIf=\"addAssetFormGroup.get('assetName').hasError('required')\">\n                    Asset name is required.\n                </mat-error>\n            </mat-form-field>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\">\n                <tb-entity-subtype-autocomplete\n                    fxFlex=\"50\"\n                    formControlName=\"assetType\"\n                    [required]=\"true\"\n                    [entityType]=\"'ASSET'\"\n                ></tb-entity-subtype-autocomplete>\n                <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"assetLabel\">\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"row\" fxLayoutGap=\"8px\">\n                <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                    <mat-label>Latitude</mat-label>\n                    <input type=\"number\" step=\"any\" matInput formControlName=\"latitude\">\n                </mat-form-field>\n                <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                    <mat-label>Longitude</mat-label>\n                    <input type=\"number\" step=\"any\" matInput formControlName=\"longitude\">\n                </mat-form-field>\n            </div>\n      </div>  \n  </div>\n  <div mat-dialog-actions fxLayout=\"row\">\n    <span fxFlex></span>\n    <button mat-button color=\"primary\"\n            type=\"button\"\n            [disabled]=\"(isLoading$ | async)\"\n            (click)=\"cancel()\" cdkFocusInitial>\n      Cancel\n    </button>\n    <button mat-button mat-raised-button color=\"primary\"\n            style=\"margin-right: 20px;\"\n            type=\"submit\"\n            [disabled]=\"(isLoading$ | async) || addAssetForm.invalid || !addAssetForm.dirty\">\n      Create\n    </button>\n  </div>\n</form>\n",
                "customCss" : "",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenAddAssetDialog();\n\nfunction openAddAssetDialog() {\n    customDialog.customDialog(htmlTemplate, AddAssetDialogController).subscribe();\n}\n\nfunction AddAssetDialogController(instance) {\n    let vm = instance;\n    \n    vm.addAssetFormGroup = vm.fb.group({\n      assetName: ['', [vm.validators.required]],\n      assetType: ['', [vm.validators.required]],\n      assetLabel: [''],\n      attributes: vm.fb.group({\n          latitude: [null],\n          longitude: [null]\n      })      \n    });\n    \n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.save = function() {\n        vm.addAssetFormGroup.markAsPristine();\n        let asset = {\n            name: vm.addAssetFormGroup.get('assetName').value,\n            type: vm.addAssetFormGroup.get('assetType').value,\n            label: vm.addAssetFormGroup.get('assetLabel').value\n        };\n        assetService.saveAsset(asset).subscribe(\n            function (asset) {\n                saveAttributes(asset.id).subscribe(\n                    function () {\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    }\n                );\n            }\n        );\n    };\n    \n    function saveAttributes(entityId) {\n        let attributes = vm.addAssetFormGroup.get('attributes').value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            attributesArray.push({key: key, value: attributes[key]});\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n}",
                "customResources" : [ ],
                "id" : "70837a9d-c3de-a9a7-03c5-dccd14998758"
              } ],
              "actionCellButton" : [ {
                "name" : "Edit asset",
                "icon" : "edit",
                "type" : "customPretty",
                "customHtml" : "<form #editAssetForm=\"ngForm\" [formGroup]=\"editAssetFormGroup\"\n      (ngSubmit)=\"save()\" style=\"width: 480px;\">\n  <mat-toolbar fxLayout=\"row\" color=\"primary\">\n    <h2>Edit asset</h2>\n    <span fxFlex></span>\n    <button mat-icon-button\n            (click)=\"cancel()\"\n            type=\"button\">\n      <mat-icon class=\"material-icons\">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n  </mat-progress-bar>\n  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n  <div mat-dialog-content>\n      <div class=\"mat-padding\" fxLayout=\"column\">\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Asset name</mat-label>\n                <input matInput formControlName=\"assetName\" required>\n                <mat-error *ngIf=\"editAssetFormGroup.get('assetName').hasError('required')\">\n                    Asset name is required.\n                </mat-error>\n            </mat-form-field>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\">\n                <tb-entity-subtype-autocomplete\n                    fxFlex=\"50\"\n                    formControlName=\"assetType\"\n                    [required]=\"true\"\n                    [entityType]=\"'ASSET'\"\n                ></tb-entity-subtype-autocomplete>\n                <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"assetLabel\">\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"row\" fxLayoutGap=\"8px\">\n                <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                    <mat-label>Latitude</mat-label>\n                    <input type=\"number\" step=\"any\" matInput formControlName=\"latitude\">\n                </mat-form-field>\n                <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                    <mat-label>Longitude</mat-label>\n                    <input type=\"number\" step=\"any\" matInput formControlName=\"longitude\">\n                </mat-form-field>\n            </div>\n      </div>  \n  </div>\n  <div mat-dialog-actions fxLayout=\"row\">\n    <span fxFlex></span>\n    <button mat-button color=\"primary\"\n            type=\"button\"\n            [disabled]=\"(isLoading$ | async)\"\n            (click)=\"cancel()\" cdkFocusInitial>\n      Cancel\n    </button>\n    <button mat-button mat-raised-button color=\"primary\"\n            type=\"submit\"\n            style=\"margin-right: 20px;\"\n            [disabled]=\"(isLoading$ | async) || editAssetForm.invalid || !editAssetForm.dirty\">\n      Update\n    </button>\n  </div>\n</form>\n",
                "customCss" : "",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditAssetDialog();\n\nfunction openEditAssetDialog() {\n    customDialog.customDialog(htmlTemplate, EditAssetDialogController).subscribe();\n}\n\nfunction EditAssetDialogController(instance) {\n    let vm = instance;\n    \n    vm.asset = null;\n    vm.attributes = {};\n    \n    vm.editAssetFormGroup = vm.fb.group({\n      assetName: ['', [vm.validators.required]],\n      assetType: ['', [vm.validators.required]],\n      assetLabel: [''],\n      attributes: vm.fb.group({\n          latitude: [null],\n          longitude: [null]\n      })      \n    });\n    \n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.save = function() {\n        vm.editAssetFormGroup.markAsPristine();\n        vm.asset.name = vm.editAssetFormGroup.get('assetName').value,\n        vm.asset.type = vm.editAssetFormGroup.get('assetType').value,\n        vm.asset.label = vm.editAssetFormGroup.get('assetLabel').value\n        assetService.saveAsset(vm.asset).subscribe(\n            function () {\n                saveAttributes().subscribe(\n                    function () {\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    }\n                );\n            }\n        );\n    };\n    \n    getEntityInfo();\n    \n    function getEntityInfo() {\n        assetService.getAsset(entityId.id).subscribe(\n            function (asset) {\n                attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE',\n                                                    ['latitude', 'longitude']).subscribe(\n                   function (attributes) {\n                        for (let i = 0; i < attributes.length; i++) {\n                            vm.attributes[attributes[i].key] = attributes[i].value; \n                        }\n                        vm.asset = asset;\n                        vm.editAssetFormGroup.patchValue(\n                            {\n                                assetName: vm.asset.name,\n                                assetType: vm.asset.type,\n                                assetLabel: vm.asset.label,\n                                attributes: {\n                                    latitude: vm.attributes.latitude,\n                                    longitude: vm.attributes.longitude\n                                }\n                            }, {emitEvent: false}\n                        );\n                   } \n                );\n            }\n        );    \n    }\n    \n    function saveAttributes() {\n        let attributes = vm.editAssetFormGroup.get('attributes').value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            attributesArray.push({key: key, value: attributes[key]});\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, 'SERVER_SCOPE', attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n}",
                "customResources" : [ ],
                "id" : "93931e52-5d7c-903e-67aa-b9435df44ff4"
              }, {
                "name" : "Delete asset",
                "icon" : "delete",
                "type" : "custom",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\n\nopenDeleteAssetDialog();\n\nfunction openDeleteAssetDialog() {\n    let title = \"Are you sure you want to delete the asset \" + entityName +  \"?\";\n    let content = \"Be careful, after the confirmation, the asset and all related data will become unrecoverable!\";\n    dialogs.confirm(title, content, 'Cancel', 'Delete').subscribe(\n        function (result) {\n            if (result) {\n                deleteAsset();\n            }\n        }\n    );\n}\n\nfunction deleteAsset() {\n    assetService.deleteAsset(entityId.id).subscribe(\n        function () {\n            widgetContext.updateAliases();\n        }\n    );\n}\n",
                "id" : "ec2708f6-9ff0-186b-e4fc-7635ebfa3074"
              } ]
            },
            "configMode" : "basic",
            "titleFont" : null,
            "titleColor" : null,
            "enableDataExport" : true
          },
          "row" : 0,
          "col" : 0,
          "id" : "be9605f5-973f-e971-1e08-c75dbbdabd4d"
        }
      },
      "states" : {
        "default" : {
          "name" : "Smart Energy Management",
          "root" : true,
          "layouts" : {
            "main" : {
              "widgets" : {
                "738ba507-9b99-2208-8fe1-aa5619482e3d" : {
                  "sizeX" : 54,
                  "sizeY" : 5,
                  "row" : 0,
                  "col" : 0
                },
                "65fc0809-e9ec-9bf0-29ce-35a3542375ab" : {
                  "sizeX" : 16,
                  "sizeY" : 14,
                  "row" : 5,
                  "col" : 0
                },
                "be9605f5-973f-e971-1e08-c75dbbdabd4d" : {
                  "sizeX" : 23,
                  "sizeY" : 14,
                  "row" : 5,
                  "col" : 17
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#eeeeee",
                "columns" : 54,
                "margin" : 10,
                "outerMargin" : true,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : false,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70
              }
            }
          }
        }
      },
      "entityAliases" : {
        "ab6dc825-b78b-9de8-e36d-18b21e329b65" : {
          "id" : "ab6dc825-b78b-9de8-e36d-18b21e329b65",
          "alias" : "Building summary",
          "filter" : {
            "type" : "assetType",
            "resolveMultiple" : true,
            "assetTypes" : [ "Site" ],
            "assetNameFilter" : ""
          }
        },
        "2d6e9b28-e3c7-2d72-47b2-ab6fbdd32535" : {
          "id" : "2d6e9b28-e3c7-2d72-47b2-ab6fbdd32535",
          "alias" : "Devices on current state",
          "filter" : {
            "type" : "deviceType",
            "resolveMultiple" : true,
            "deviceTypes" : [ "Energy sensor" ],
            "deviceNameFilter" : ""
          }
        },
        "a4bf1508-e72e-2f0b-c090-9d0c4bdb3115" : {
          "id" : "a4bf1508-e72e-2f0b-c090-9d0c4bdb3115",
          "alias" : "Devices by relation",
          "filter" : {
            "type" : "deviceSearchQuery",
            "resolveMultiple" : true,
            "rootStateEntity" : true,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null,
            "rootEntity" : null,
            "direction" : "FROM",
            "maxLevel" : 1,
            "fetchLastLevelOnly" : false,
            "relationType" : "Contains",
            "deviceTypes" : [ "Energy sensor" ]
          }
        },
        "a991edcc-fc3e-0198-757e-d30935e42a25" : {
          "id" : "a991edcc-fc3e-0198-757e-d30935e42a25",
          "alias" : "Selected Building based on dashboard state",
          "filter" : {
            "type" : "stateEntity",
            "resolveMultiple" : false,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null
          }
        },
        "607619ae-f469-6232-492b-ce789598f41d" : {
          "id" : "607619ae-f469-6232-492b-ce789598f41d",
          "alias" : "Tenant",
          "filter" : {
            "type" : "singleEntity",
            "resolveMultiple" : false,
            "singleEntity" : {
              "entityType" : "TENANT",
              "id" : "4cbd8d40-88f5-11ee-8a25-070bfaaff76d"
            }
          }
        },
        "dc223a32-9b93-5e5c-8a2a-a25bd8ec2a68" : {
          "id" : "dc223a32-9b93-5e5c-8a2a-a25bd8ec2a68",
          "alias" : "Tenant with type",
          "filter" : {
            "type" : "entityType",
            "resolveMultiple" : false,
            "entityType" : "TENANT"
          }
        }
      },
      "filters" : {
        "01f3afb1-110b-b079-8f22-741d1ca6dfd2" : {
          "id" : "01f3afb1-110b-b079-8f22-741d1ca6dfd2",
          "filter" : "Active filters",
          "keyFilters" : [ {
            "key" : {
              "type" : "ATTRIBUTE",
              "key" : "active"
            },
            "valueType" : "BOOLEAN",
            "predicates" : [ {
              "keyFilterPredicate" : {
                "operation" : "EQUAL",
                "value" : {
                  "defaultValue" : true,
                  "dynamicValue" : null
                },
                "type" : "BOOLEAN"
              },
              "userInfo" : {
                "editable" : true,
                "label" : "",
                "autogeneratedLabel" : true,
                "order" : 0
              }
            } ]
          } ],
          "editable" : true
        }
      },
      "timewindow" : {
        "displayValue" : "",
        "hideInterval" : false,
        "hideLastInterval" : false,
        "hideQuickInterval" : false,
        "hideAggregation" : false,
        "hideAggInterval" : false,
        "hideTimezone" : false,
        "selectedTab" : 0,
        "realtime" : {
          "realtimeType" : 0,
          "interval" : 1000,
          "timewindowMs" : 60000,
          "quickInterval" : "CURRENT_DAY"
        },
        "history" : {
          "historyType" : 0,
          "interval" : 1000,
          "timewindowMs" : 60000,
          "fixedTimewindow" : {
            "startTimeMs" : 1704693090497,
            "endTimeMs" : 1704779490497
          },
          "quickInterval" : "CURRENT_DAY"
        },
        "aggregation" : {
          "type" : "AVG",
          "limit" : 25000
        }
      },
      "settings" : {
        "stateControllerId" : "entity",
        "showTitle" : false,
        "showDashboardsSelect" : true,
        "showEntitiesSelect" : true,
        "showDashboardTimewindow" : true,
        "showDashboardExport" : true,
        "toolbarAlwaysOpen" : true
      }
    },
    "customerId" : null,
    "externalId" : null,
    "id" : {
      "entityType" : "DASHBOARD",
      "id" : "2247bd90-aeb3-11ee-be5a-2d562209d378"
    },
    "image" : null,
    "mobileHide" : false,
    "mobileOrder" : null,
    "name" : "Smart Energy Management",
    "ownerId" : null,
    "title" : "Smart Energy Management"
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}